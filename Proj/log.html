<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Northern India Security Alert System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: #e74c3c;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 8px 8px 0 0;
        }
        
        .search-box {
            margin: 20px 0;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        #destination {
            width: 70%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        #checkSafety {
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        
        #map {
            height: 300px;
            width: 100%;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .danger-legend {
            background-color: white;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 5px;
        }
        
        .conflict-zone { background-color: #c0392b; }
        .high-danger { background-color: #e74c3c; }
        .restricted-area { background-color: #8e44ad; }
        .military-presence { background-color: #3498db; }
        .safe-zone { background-color: #2ecc71; }
        
        .safety-alerts, .conflict-alerts {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .alert-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .alert-item:last-child {
            border-bottom: none;
        }
        
        .alert-high {
            border-left: 4px solid #e74c3c;
        }
        
        .alert-medium {
            border-left: 4px solid #f39c12;
        }
        
        .alert-low {
            border-left: 4px solid #f1c40f;
        }
        
        .alert-conflict {
            border-left: 4px solid #c0392b;
            background-color: #fff8f8;
        }
        
        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .alert-location {
            color: #666;
            font-size: 14px;
        }
        
        .alert-date {
            color: #999;
            font-size: 12px;
            margin-top: 5px;
        }
        
        #safetyResult {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            display: none;
        }
        
        .sos-panel {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .sos-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 150px;
            height: 150px;
            font-size: 24px;
            font-weight: bold;
            margin: 20px auto;
            display: block;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        
        .sos-button:active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .sos-button.activated {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .status {
            text-align: center;
            font-weight: 600;
        }
        
        .emergency-contacts {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .contact-card {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .contact-card:last-child {
            border-bottom: none;
        }
        
        .contact-icon {
            width: 40px;
            height: 40px;
            background-color: #e74c3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 20px;
        }
        
        .contact-info {
            flex: 1;
        }
        
        .contact-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .contact-number {
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Northern India Security Alert System</h1>
            <p>Safety information and emergency SOS for conflict zones</p>
        </header>
        
        <div class="search-box">
            <input type="text" id="destination" placeholder="Enter your destination (e.g., Jammu, Amritsar, Jaisalmer)">
            <button id="checkSafety">Check Safety</button>
        </div>
        
        <div id="safetyResult"></div>
        
        <div id="map"></div>
        
        <div class="danger-legend">
            <div class="legend-item">
                <div class="legend-color conflict-zone"></div>
                <span>Active Conflict</span>
            </div>
            <div class="legend-item">
                <div class="legend-color restricted-area"></div>
                <span>Restricted Area</span>
            </div>
            <div class="legend-item">
                <div class="legend-color military-presence"></div>
                <span>Military Presence</span>
            </div>
            <div class="legend-item">
                <div class="legend-color high-danger"></div>
                <span>High Danger</span>
            </div>
            <div class="legend-item">
                <div class="legend-color safe-zone"></div>
                <span>Safe Zone</span>
            </div>
        </div>
        
        <div class="conflict-alerts">
            <h2>Current Conflict Alerts</h2>
            
            <div class="alert-item alert-conflict">
                <div class="alert-title">ACTIVE MILITARY CONFLICT</div>
                <div class="alert-location">Line of Control (Jammu & Kashmir)</div>
                <p>Increased ceasefire violations reported. Avoid all travel within 10km of LoC.</p>
                <div class="alert-date">Updated: Today</div>
            </div>
            
            <div class="alert-item alert-high">
                <div class="alert-title">BORDER TENSION</div>
                <div class="alert-location">Punjab Border Regions</div>
                <p>Heightened military presence. Some villages being evacuated.</p>
                <div class="alert-date">Updated: Today</div>
            </div>
            
            <div class="alert-item alert-medium">
                <div class="alert-title">RESTRICTED MOVEMENT</div>
                <div class="alert-location">Rajasthan Border Areas</div>
                <p>Night curfew imposed in border districts. Carry ID at all times.</p>
                <div class="alert-date">Updated: Today</div>
            </div>
        </div>
        
        <div class="sos-panel">
            <div class="status" id="status">Ready to send emergency alert</div>
            <button class="sos-button" id="sosButton">SOS</button>
            <p>Use in case of military conflict, natural disaster, or medical emergency</p>
        </div>
        
        <div class="emergency-contacts">
            <h2>Special Emergency Contacts</h2>
            
            <div class="contact-card">
                <div class="contact-icon">A</div>
                <div class="contact-info">
                    <div class="contact-name">Army Helpline (Jammu)</div>
                    <div class="contact-number">0191-2549604</div>
                </div>
            </div>
            
            <div class="contact-card">
                <div class="contact-icon">B</div>
                <div class="contact-info">
                    <div class="contact-name">Border Security Force</div>
                    <div class="contact-number">011-24361696</div>
                </div>
            </div>
            
            <div class="contact-card">
                <div class="contact-icon">E</div>
                <div class="contact-info">
                    <div class="contact-name">Evacuation Coordination</div>
                    <div class="contact-number">1800-180-1525</div>
                </div>
            </div>
            
            <div class="contact-card">
                <div class="contact-icon">M</div>
                <div class="contact-info">
                    <div class="contact-name">Military Police</div>
                    <div class="contact-number">+91-11-2569-3336</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Current safety alerts database with military conflict info
        const safetyAlerts = {
  "awantipura": {
    title: "Awantipura",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 33.922, lng: 75.016 }
  },
  "srinagar": {
    title: "Srinagar",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 34.0837, lng: 74.7973 }
  },
  "pathankot": {
    title: "Pathankot",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 32.2643, lng: 75.6421 }
  },
  "amritsar": {
    title: "Amritsar",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 31.6340, lng: 74.8723 }
  },
  "kapurthala": {
    title: "Kapurthala",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 31.3801, lng: 75.3810 }
  },
  "jalandhar": {
    title: "Jalandhar",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 31.3260, lng: 75.5762 }
  },
  "ludhiana": {
    title: "Ludhiana",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 30.9000, lng: 75.8573 }
  },
  "adampur": {
    title: "Adampur",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 31.4322, lng: 75.7147 }
  },
  "bhatinda": {
    title: "Bhatinda",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 30.2110, lng: 74.9455 }
  },
  "chandigarh": {
    title: "Chandigarh",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 30.7333, lng: 76.7794 }
  },
  "nal": {
    title: "Nal",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 29.3611, lng: 73.8800 }
  },
  "phalodi": {
    title: "Phalodi",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 27.1310, lng: 72.3683 }
  },
  "uttarlai": {
    title: "Uttarlai",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 25.8333, lng: 71.8667 }
  },
  "bhuj": {
    title: "Bhuj",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 23.2530, lng: 69.6699 }
  },
  "udhampur": {
    title: "Udhampur",
    alertLevel: "military",
    alerts: [
      "Due to recent intelligence inputs and ongoing regional tensions, these locations have been placed under heightened security surveillance.",
      "These areas include major air force bases, border-sensitive cities, and logistics hubs vital to national defense operations.",
      "Presence of major military/air force installations",
      "Avoid non-essential travel to these locations until further notice.",
      "Strictly adhere to local curfews, checkpoints, and law enforcement instructions."
    ],
    advice: "",
    coords: { lat: 32.9277, lng: 75.1300 }
  },
         "jammu": {
                title: "Jammu Region",
                alertLevel: "conflict",
                alerts: [
                    "Recent military attacks reported",
                    "Security operations ongoing",
                    "Avoid all non-essential travel",
                    "Curfew may be imposed without notice"
                ],
                advice: "Do not travel to Jammu until situation stabilizes. If you must go, register with local authorities and maintain contact with your embassy."
            },
            "pahalgam": {
                title: "Pahalgam Region",
                alertLevel: "conflict",
                alerts: [
                    "Recent military attacks reported",
                    "Security operations ongoing",
                    "Avoid all non-essential travel",
                    "Curfew may be imposed without notice"
                ],
                advice: "Do not travel to Pahalgam until situation stabilizes. If you must go, register with local authorities and maintain contact with your embassy."
            },
            "srinagar": {
                title: "Srinagar",
                alertLevel: "high",
                alerts: [
                    "Increased military patrols",
                    "Internet restrictions in place",
                    "Some roads blocked for security"
                ],
                advice: "Carry identification at all times. Follow curfew timings strictly."
            },
            "amritsar": {
                title: "Amritsar & Punjab Border",
                alertLevel: "high",
                alerts: [
                    "Border tensions with neighboring country",
                    "Increased BSF presence",
                    "Some villages evacuated"
                ],
                advice: "Avoid border areas. Follow instructions from security forces."
            },
            "jaisalmer": {
                title: "Jaisalmer Border Areas",
                alertLevel: "medium",
                alerts: [
                    "Increased military patrols",
                    "Restricted movement after dark",
                    "Security checks on major roads"
                ],
                advice: "Travel with identification. Avoid night movement in border areas."
            },
            "leh": {
                title: "Leh-Ladakh Region",
                alertLevel: "medium",
                alerts: [
                    "Military buildup in some areas",
                    "Road closures possible",
                    "Acute mountain sickness risk"
                ],
                advice: "Check road status before traveling. Carry oxygen if prone to AMS."
            },
            "pathankot": {
                title: "Pathankot Area",
                alertLevel: "high",
                alerts: [
                    "High security alert",
                    "Military base on high alert",
                    "Increased security checks"
                ],
                advice: "Expect delays at checkpoints. Do not photograph military installations."
            }
        };

        // Conflict zones data for Northern India
        const conflictZones = {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Line of Control (Jammu Sector)",
                        "dangerLevel": "conflict",
                        "description": "Active military operations due to recent attacks. High risk area."
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [[
                            [74.6000, 32.9000], [74.6500, 32.8500],
                            [74.7000, 32.8000], [74.7500, 32.8000],
                            [74.8000, 32.8500], [74.8500, 32.9000],
                            [74.8000, 32.9500], [74.7500, 33.0000],
                            [74.7000, 33.0000], [74.6500, 32.9500],
                            [74.6000, 32.9000]
                        ]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Pahalgam Danger Zone",
                        "dangerLevel": "conflict",
                        "description": "Active military operations due to recent attacks. High risk area."
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [[
                            [75.3200, 34.0000], [75.3500, 33.9800],
                            [75.3800, 33.9700], [75.4100, 33.9700],
                            [75.4400, 33.9800], [75.4500, 34.0000],
                            [75.4400, 34.0200], [75.4100, 34.0300],
                            [75.3800, 34.0300], [75.3500, 34.0200],
                            [75.3200, 34.0000]
                        ]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Punjab Border Region",
                        "dangerLevel": "restricted",
                        "description": "High military presence. Restricted movement."
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [[
                            [74.8677, 32.1010], [74.9000, 32.0800],
                            [74.9500, 32.0600], [75.0000, 32.0400],
                            [75.0500, 32.0200], [75.1000, 32.0000],
                            [75.1500, 31.9800], [75.1000, 31.9600],
                            [75.0500, 31.9400], [75.0000, 31.9200],
                            [74.9500, 31.9000], [74.9000, 31.8800],
                            [74.8500, 31.8600], [74.8000, 31.8800],
                            [74.7500, 31.9000], [74.7000, 31.9200],
                            [74.6500, 31.9400], [74.6000, 31.9600],
                            [74.5500, 31.9800], [74.6000, 32.0000],
                            [74.6500, 32.0200], [74.7000, 32.0400],
                            [74.7500, 32.0600], [74.8000, 32.0800],
                            [74.8500, 32.1000], [74.8677, 32.1010]
                        ]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Rajasthan Border Area",
                        "dangerLevel": "military",
                        "description": "Increased military patrols. Night curfew in effect."
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [[
                            [70.5000, 29.0000], [70.6000, 28.9000],
                            [70.7000, 28.8000], [70.8000, 28.7000],
                            [70.9000, 28.6000], [71.0000, 28.5000],
                            [71.1000, 28.4000], [71.0000, 28.3000],
                            [70.9000, 28.2000], [70.8000, 28.1000],
                            [70.7000, 28.0000], [70.6000, 27.9000],
                            [70.5000, 27.8000], [70.4000, 27.9000],
                            [70.3000, 28.0000], [70.2000, 28.1000],
                            [70.1000, 28.2000], [70.0000, 28.3000],
                            [69.9000, 28.4000], [70.0000, 28.5000],
                            [70.1000, 28.6000], [70.2000, 28.7000],
                            [70.3000, 28.8000], [70.4000, 28.9000],
                            [70.5000, 29.0000]
                        ]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Pathankot Military Zone",
                        "dangerLevel": "restricted",
                        "description": "Military base area - restricted access."
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [[
                            [75.6500, 32.2667], [75.6700, 32.2500],
                            [75.6900, 32.2400], [75.7100, 32.2400],
                            [75.7300, 32.2500], [75.7400, 32.2667],
                            [75.7300, 32.2833], [75.7100, 32.2933],
                            [75.6900, 32.2933], [75.6700, 32.2833],
                            [75.6500, 32.2667]
                        ]]
                    }
                }
            ]
        };

        let map;
        let destinationMarker;
        let emergencyActivated = false;
        let userLocation = null;

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 32.7266, lng: 74.8570 }, // Center on Jammu region
                zoom: 7,
            });
            
            // Add conflict zones to the map
            conflictZones.features.forEach(zone => {
                const zoneColor = 
                    zone.properties.dangerLevel === "conflict" ? "#c0392b" :
                    zone.properties.dangerLevel === "restricted" ? "#8e44ad" :
                    "#3498db";
                
                const zonePolygon = new google.maps.Polygon({
                    paths: zone.geometry.coordinates[0].map(coord => ({
                        lat: coord[1],
                        lng: coord[0]
                    })),
                    strokeColor: zoneColor,
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    fillColor: zoneColor,
                    fillOpacity: 0.35,
                    map: map,
                    title: zone.properties.name
                });
                
                // Add info window for each conflict zone
                const infoWindow = new google.maps.InfoWindow({
                    content: `<h3>${zone.properties.name}</h3>
                             <p><strong>Status:</strong> ${zone.properties.dangerLevel.toUpperCase()}</p>
                             <p>${zone.properties.description}</p>`
                });
                
                zonePolygon.addListener("click", () => {
                    infoWindow.setPosition({
                        lat: zone.geometry.coordinates[0][0][1],
                        lng: zone.geometry.coordinates[0][0][0]
                    });
                    infoWindow.open(map);
                });
            });
            
            // Try to get user's current location
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        
                        // Center map on user's location
                        map.setCenter(userLocation);
                        
                        // Add marker
                        new google.maps.Marker({
                            position: userLocation,
                            map: map,
                            title: "Your location"
                        });
                    },
                    (error) => {
                        console.error("Error getting location:", error);
                    }
                );
            }
            
            // Setup destination search
            document.getElementById('checkSafety').addEventListener('click', checkDestinationSafety);
            
            // SOS Button functionality
            document.getElementById('sosButton').addEventListener('click', function() {
                if (!emergencyActivated) {
                    // Activate SOS
                    emergencyActivated = true;
                    this.classList.add('activated');
                    document.getElementById('status').textContent = "Military and rescue teams alerted!";
                    document.getElementById('status').style.color = "#e74c3c";
                    
                    // In a real app, this would send the location to emergency services
                    if (userLocation) {
                        console.log("Sending emergency alert from location:", userLocation);
                        
                        // Check if in conflict zone
                        let inDangerZone = false;
                        conflictZones.features.forEach(zone => {
                            if (isInZone(userLocation, zone.geometry.coordinates[0])) {
                                inDangerZone = true;
                                alert(`EMERGENCY ALERT SENT TO MILITARY UNITS!\n\nYou are in ${zone.properties.name} (${zone.properties.dangerLevel.toUpperCase()} ZONE)\n\nCoordinates:\nLat: ${userLocation.lat}\nLng: ${userLocation.lng}\n\nStay under cover if possible.`);
                            }
                        });
                        
                        if (!inDangerZone) {
                            alert(`EMERGENCY ALERT SENT!\n\nYour location:\nLatitude: ${userLocation.lat}\nLongitude: ${userLocation.lng}\n\nHelp is being notified.`);
                        }
                    } else {
                        alert("EMERGENCY ALERT SENT!\n\nCould not determine your exact location. Emergency services have been notified.");
                    }
                } else {
                    // Cancel SOS
                    emergencyActivated = false;
                    this.classList.remove('activated');
                    document.getElementById('status').textContent = "Emergency alert canceled.";
                    document.getElementById('status').style.color = "inherit";
                }
            });
        }
        
        function checkDestinationSafety() {
            const destinationInput = document.getElementById('destination').value.toLowerCase();
            const resultDiv = document.getElementById('safetyResult');
            resultDiv.style.display = 'block';
            
            // Clear previous marker
            if (destinationMarker) {
                destinationMarker.setMap(null);
            }
            
            // Find matching alerts
            let foundAlert = null;
            for (const key in safetyAlerts) {
                if (destinationInput.includes(key)) {
                    foundAlert = safetyAlerts[key];
                    break;
                }
            }
            
            if (foundAlert) {
                // Display alert info
                const alertLevelClass = `alert-${foundAlert.alertLevel}`;
                resultDiv.innerHTML = `
                    <div class="alert-item ${alertLevelClass}">
                        <div class="alert-title">Security Alert for ${foundAlert.title}</div>
                        <div class="alert-location">Alert Level: ${foundAlert.alertLevel.toUpperCase()}</div>
                        <ul>${foundAlert.alerts.map(alert => `<li>${alert}</li>`).join('')}</ul>
                        <p><strong>Travel Advice:</strong> ${foundAlert.advice}</p>
                    </div>
                `;
                
                // Center map on this location (simplified for demo)
                if (foundAlert.title.includes("Jammu")) {
                    map.setCenter({ lat: 32.7266, lng: 74.8570 });
                    destinationMarker = new google.maps.Marker({
                        position: { lat: 32.7266, lng: 74.8570 },
                        map: map,
                        title: foundAlert.title
                    });
                } else if (foundAlert.title.includes("Amritsar")) {
                    map.setCenter({ lat: 31.6340, lng: 74.8723 });
                    destinationMarker = new google.maps.Marker({
                        position: { lat: 31.6340, lng: 74.8723 },
                        map: map,
                        title: foundAlert.title
                    });
                } else if (foundAlert.title.includes("Jaisalmer")) {
                    map.setCenter({ lat: 26.9157, lng: 70.9083 });
                    destinationMarker = new google.maps.Marker({
                        position: { lat: 26.9157, lng: 70.9083 },
                        map: map,
                        title: foundAlert.title
                    });
                }
                
                map.setZoom(10);
            } else {
                resultDiv.innerHTML = `
                    <div class="alert-item">
                        <div class="alert-title">No specific alerts found for this destination</div>
                        <p>General security precautions apply. Check official sources before traveling to border areas.</p>
                    </div>
                `;
            }
        }
        
        // Helper function to check if point is in polygon (simplified)
        function isInZone(point, polygon) {
            // Simplified check for demo - in production use proper point-in-polygon algorithm
            const lat = point.lat;
            const lng = point.lng;
            
            // Get rough bounds of polygon
            let minLat = polygon[0][1], maxLat = polygon[0][1];
            let minLng = polygon[0][0], maxLng = polygon[0][0];
            
            polygon.forEach(coord => {
                minLat = Math.min(minLat, coord[1]);
                maxLat = Math.max(maxLat, coord[1]);
                minLng = Math.min(minLng, coord[0]);
                maxLng = Math.max(maxLng, coord[0]);
            });
            
            return (lat >= minLat && lat <= maxLat && lng >= minLng && lng <= maxLng);
        }
    </script>
    
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCoD_Vh3VHhsHS1brCjhUlDMq1lE6v0OsM&callback=initMap&libraries=places">
    </script>
</body>
</html>